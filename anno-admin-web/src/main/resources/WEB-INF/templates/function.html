<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8"/>
    <title>AmisDemo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
    <link rel="stylesheet" href="/sdk/antd.css"/>
    <link rel="stylesheet" href="/sdk/helper.css"/>
    <link rel="stylesheet" href="/sdk/iconfont.css"/>
    <style>
        html,
        body,
        .app-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
<div id="root" class="app-wrapper"></div>
<script src="/sdk/sdk.js"></script>

<script type="text/javascript" th:inline="javascript">
    (function () {
        let amis = amisRequire('amis/embed');
        // 通过替换下面这个配置来生成不同页面
        // 解析字符串到json
        let amisJSON = [[${amisJSON}]];
        let properties = [[${properties}]];
        let amisScoped = amis.embed('#root', amisJSON,
            {data: properties},
            {
                // 下面是一些可选的外部控制函数
                // 在 sdk 中可以不传，用来实现 ajax 请求，但在 npm 中这是必须提供的
                // fetcher: (url, method, data, config) => {},
                // 全局 api 请求适配器
                // 另外在 amis 配置项中的 api 也可以配置适配器，针对某个特定接口单独处理。
                //
                requestAdaptor(api) {
                    console.log("add token: "+localStorage.getItem("anno-token"))
                    api.headers["anno-token"] = localStorage.getItem("anno-token");
                    return api;
                },
                //
                // 全局 api 适配器。
                // 另外在 amis 配置项中的 api 也可以配置适配器，针对某个特定接口单独处理。
                // responseAdaptor(api, payload, query, request, response) {
                //   return payload;
                // }
                //
                // 用来接管页面跳转，比如用 location.href 或 window.open，或者自己实现 amis 配置更新
                // jumpTo: to => { location.href = to; },
                //
                // 用来实现地址栏更新
                // updateLocation: (to, replace) => {},
                //
                // 用来判断是否目标地址当前地址。
                // isCurrentUrl: url => {},
                //
                // 用来实现复制到剪切板
                // copy: content => {},
                //
                // 用来实现通知
                // notify: (type, msg) => {},
                //
                // 用来实现提示
                // alert: content => {},
                //
                // 用来实现确认框。
                // confirm: content => {},
                //
                // 主题，默认是 default，还可以设置成 cxd 或 dark，但记得引用它们的 css，比如 sdk 目录下的 cxd.css
                theme: 'antd'
                //
                // 用来实现用户行为跟踪，详细请查看左侧高级中的说明
                // tracker: (eventTracker) => {},
                //
                // Toast提示弹出位置，默认为'top-center'
                // toastPosition: 'top-right' | 'top-center' | 'top-left' | 'bottom-center' | 'bottom-left' | 'bottom-right' | 'center'
            });
    })();
</script>
</body>
</html>